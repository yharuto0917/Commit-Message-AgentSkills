# Semantic Commits 規約

Semantic Commitsは、意味的に明確なコミットメッセージを作成するための規約です。Conventional Commitsと似ていますが、より直感的な動詞を使用します。

## 基本フォーマット

```
<verb>: <subject>

[optional body]

[optional footer]
```

## Verb（動詞）

変更の種類を示す動詞：

### 主要な動詞

- **add**: 新しい機能、ファイル、依存関係などを追加
- **update**: 既存の機能や設定を更新・改善
- **fix**: バグやエラーを修正
- **remove**: 不要なコード、ファイル、機能を削除
- **refactor**: 機能を変えずにコードを整理
- **improve**: パフォーマンスや品質を向上
- **document**: ドキュメントを追加・更新
- **test**: テストを追加・修正
- **style**: コードスタイルやフォーマットを変更
- **configure**: 設定ファイルを変更
- **build**: ビルドシステムを変更
- **deploy**: デプロイに関する変更
- **revert**: 以前のコミットを取り消し

### 補助的な動詞

- **rename**: ファイルや変数の名前を変更
- **move**: ファイルやコードの場所を移動
- **merge**: ブランチやコードをマージ
- **optimize**: パフォーマンスを最適化
- **upgrade**: 依存関係やバージョンを更新
- **downgrade**: バージョンをダウングレード
- **secure**: セキュリティを強化
- **validate**: バリデーションを追加・改善
- **format**: コードフォーマットを整形
- **clean**: 不要なコードやファイルをクリーンアップ

## Subject（件名）

変更の簡潔な説明：

- 命令形を使用
- 最初の文字は小文字（動詞の後）
- 末尾にピリオドを付けない
- 50文字以内に収める
- 具体的で明確に

**良い例：**
```
add: ユーザー認証機能
update: ログイン画面のデザイン
fix: パスワードリセットのバグ
remove: 未使用のライブラリ
```

**悪い例：**
```
Add: User Authentication.  // 大文字始まり、ピリオド
update code  // 不明確
Fixed some bugs  // 過去形、曖昧
```

## Body（本文）

変更の詳細な説明（オプション）：

- subjectの後に空行を1行入れる
- 「何を」「なぜ」変更したかを記述
- 必要に応じて複数行使用
- 各行72文字以内

```
add: ユーザー認証機能

JWT トークンベースの認証を実装。
ログイン、ログアウト、トークンリフレッシュに対応。
セッションの有効期限は24時間。
```

## Footer（フッター）

Issue参照や破壊的変更を記述（オプション）：

```
fix: データベース接続エラー

タイムアウト設定を30秒に延長。

Closes #456
```

## 実例

### 機能追加

```
add: ダークモード切り替えボタン

ヘッダーにダークモード切り替えボタンを追加。
ユーザーの設定はlocalStorageに保存される。
```

### 機能更新

```
update: 検索機能のパフォーマンス

全文検索にElasticsearchを導入。
検索速度が約10倍向上。
```

### バグ修正

```
fix: 画像アップロード時のメモリリーク

ファイルアップロード後にメモリを適切に解放。
大きな画像でもメモリ使用量が安定。
```

### コード削除

```
remove: レガシー認証コード

OAuth2移行により不要になった
基本認証コードを削除。
```

### リファクタリング

```
refactor: ユーザーモデルの構造

コードの可読性を向上させるため、
ユーザーモデルを複数のモジュールに分割。
機能の変更なし。
```

### ドキュメント

```
document: API エンドポイントの使用例

READMEに主要なAPIエンドポイントの
リクエスト/レスポンス例を追加。
```

### テスト

```
test: ユーザー登録フローのE2Eテスト

Cypressを使用したE2Eテストを追加。
正常系と異常系の両方をカバー。
```

### 設定変更

```
configure: TypeScript の厳密モードを有効化

より安全なコードのため、
tsconfig.json で strict オプションを有効化。
```

### 依存関係更新

```
upgrade: React を v17 から v18 に更新

新しいConcurrent Featuresを利用可能に。
Breaking changesに対応済み。
```

### セキュリティ強化

```
secure: SQL インジェクション対策を追加

すべてのデータベースクエリに
パラメータ化クエリを使用。
```

## 使い分けのガイドライン

### add vs update

- **add**: 完全に新しいものを作成
  ```
  add: メール通知機能
  add: ユーザー管理画面
  ```

- **update**: 既存のものを改善・変更
  ```
  update: メール通知のテンプレート
  update: ユーザー管理画面のレイアウト
  ```

### fix vs update

- **fix**: 不具合やエラーを修正
  ```
  fix: ログイン時のエラーハンドリング
  fix: メモリリーク
  ```

- **update**: 正常に動作しているものを改善
  ```
  update: ログインフローの UX
  update: エラーメッセージの文言
  ```

### remove vs clean

- **remove**: 特定の機能やコードを削除
  ```
  remove: 廃止予定のAPI v1
  remove: 使用していないライブラリ
  ```

- **clean**: 全体的な整理・クリーンアップ
  ```
  clean: コメントアウトされたコード
  clean: 一時ファイルとログ
  ```

### refactor vs improve

- **refactor**: 内部構造の変更（機能は同じ）
  ```
  refactor: 認証ロジックの構造
  refactor: ファイル配置の整理
  ```

- **improve**: 機能やパフォーマンスの向上
  ```
  improve: 画像読み込み速度
  improve: エラーメッセージの明確さ
  ```

## ヒント

1. **具体的な動詞を選ぶ**: 変更の性質を正確に表す動詞を使用
2. **一貫性**: プロジェクト内で統一された動詞セットを使用
3. **シンプルに**: 複雑な説明は本文に記述
4. **アトミック**: 1つのコミットで1つの論理的変更
5. **レビュー**: コミット前にメッセージを確認

## Conventional Commits との比較

| Semantic Commits | Conventional Commits | 用途 |
|-----------------|---------------------|------|
| add | feat | 新機能追加 |
| update | feat/refactor | 機能更新・改善 |
| fix | fix | バグ修正 |
| remove | chore | 削除 |
| refactor | refactor | リファクタリング |
| document | docs | ドキュメント |
| test | test | テスト |
| configure | chore/build | 設定変更 |
| improve | perf | パフォーマンス向上 |

Semantic Commitsの利点：
- より直感的で自然な動詞
- 学習コストが低い
- 英語ネイティブでない開発者にも分かりやすい

Conventional Commitsの利点：
- 標準化された規約
- ツールのサポートが豊富
- 自動バージョニングに対応
