# Conventional Commits 規約

Conventional Commitsは、コミットメッセージに人間と機械が読みやすい意味を持たせるための規約です。

## 基本フォーマット

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

## Type（必須）

コミットの種類を示すプレフィックス：

- **feat**: 新機能の追加
- **fix**: バグ修正
- **docs**: ドキュメントのみの変更
- **style**: コードの意味に影響を与えない変更（空白、フォーマット、セミコロンの欠落など）
- **refactor**: バグ修正も機能追加もしないコード変更
- **perf**: パフォーマンスを向上させるコード変更
- **test**: 不足しているテストの追加や既存のテストの修正
- **build**: ビルドシステムや外部依存関係に影響する変更（例: gulp, broccoli, npm）
- **ci**: CI設定ファイルやスクリプトの変更（例: Travis, Circle, BrowserStack, SauceLabs）
- **chore**: その他の変更（srcやtestファイルを変更しない）
- **revert**: 以前のコミットを取り消す

## Scope（オプション）

変更の範囲を示す名詞：

```
feat(api): ユーザー認証エンドポイントを追加
fix(ui): ボタンの配置を修正
docs(readme): インストール手順を更新
```

一般的なスコープ例：
- コンポーネント名: `(button)`, `(navbar)`, `(footer)`
- 機能モジュール: `(auth)`, `(api)`, `(database)`
- ファイル名: `(package.json)`, `(webpack.config)`

## Description（必須）

変更の簡潔な説明：

- 命令形、現在形を使用（"change" であり "changed" や "changes" ではない）
- 最初の文字を小文字にする
- 末尾にピリオド (.) を付けない
- 50文字以内に収める

**良い例：**
```
feat: ユーザーログイン機能を追加
fix: null参照エラーを修正
docs: API使用例を追加
```

**悪い例：**
```
Added user login feature.  // 過去形、末尾にピリオド
Fix: Null reference error  // 大文字始まり
refactor: いくつかのコードをリファクタリングしました。  // 過去形、不明確
```

## Body（オプション）

変更の詳細な説明：

- descriptionの後に空行を1行入れる
- 「何を」「なぜ」変更したかを説明（「どのように」は省略可）
- 複数行可能
- 各行は72文字以内

```
feat: ユーザーログイン機能を追加

JWT認証を使用したセキュアなログイン機能を実装。
セッション管理とトークンリフレッシュに対応。
```

## Footer（オプション）

破壊的変更やIssue参照を記述：

### Breaking Changes（破壊的変更）

```
feat: API v2へ移行

BREAKING CHANGE: v1 APIは廃止されました。
新しいエンドポイント /api/v2/* を使用してください。
```

### Issue参照

```
fix: ログインエラーを修正

Closes #123
Fixes #456, #789
Resolves #111
```

## 実例

### 新機能追加

```
feat(auth): パスワードリセット機能を追加

メール経由でパスワードをリセットできる機能を実装。
トークンの有効期限は24時間。

Closes #234
```

### バグ修正

```
fix(api): ユーザー検索で発生するタイムアウトを修正

データベースクエリにインデックスを追加して
検索パフォーマンスを改善。
```

### ドキュメント更新

```
docs: READMEに環境変数の説明を追加
```

### リファクタリング

```
refactor(utils): 日付処理関数を整理

重複コードを削除し、共通関数に統合。
機能の変更なし。
```

### 破壊的変更

```
feat(api)!: 認証方式をOAuth2に変更

BREAKING CHANGE: 基本認証のサポートを終了。
すべてのクライアントはOAuth2に移行する必要があります。

Migration guide: docs/oauth2-migration.md
```

## ヒント

1. **atomic commit**: 1つのコミットで1つの論理的な変更のみを行う
2. **明確な説明**: 技術的な詳細より変更の目的を重視
3. **一貫性**: プロジェクト全体で同じ規約を使用
4. **ツール活用**: commitlintなどのツールで規約を強制
5. **レビュー**: コミット前にメッセージを見直す

## よくある間違い

❌ **曖昧な説明**
```
fix: バグ修正
feat: 機能追加
```

✅ **具体的な説明**
```
fix: ユーザー登録時のメール検証エラーを修正
feat: ダークモード切り替え機能を追加
```

❌ **複数の変更を1つのコミットに**
```
feat: ログイン機能を追加、UIを改善、バグを修正
```

✅ **変更を分割**
```
feat: ログイン機能を追加
style: ログインUIのスタイルを改善
fix: ログインフォームのバリデーションを修正
```

## 自動化ツール

- **commitlint**: コミットメッセージの検証
- **husky**: Gitフック管理
- **commitizen**: 対話的なコミットメッセージ作成
- **standard-version**: 自動的なバージョニングとCHANGELOG生成
